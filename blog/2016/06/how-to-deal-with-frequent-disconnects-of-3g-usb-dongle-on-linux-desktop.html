<!DOCTYPE html>
<html lang="english">
<head>
        <meta charset="utf-8" />
        <title>How to deal with frequent disconnects of 3G USB Dongle on Linux Desktop</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Prahlad Yeri - Freelance Programmer Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Prahlad Yeri - Freelance Programmer </a></h1>
                <nav><ul>
				<li><a href="/">Home</a></li> <!--hard coded-->
                    <li><a href="/about/">About</a></li>
                    <li><a href="/projects/">Projects</a></li>
                    <li><a href="/hire-me/">Hire Me</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/blog/2016/06/how-to-deal-with-frequent-disconnects-of-3g-usb-dongle-on-linux-desktop.html" rel="bookmark"
           title="Permalink to How to deal with frequent disconnects of 3G USB Dongle on Linux Desktop">How to deal with frequent disconnects of 3G USB Dongle on Linux Desktop</a></h1>
<a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="prahladyeri">Tweet</a><script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-06-28T20:00:00+05:30">
                Published: Tue 28 June 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/prahlad-yeri.html">Prahlad Yeri</a>
        </address>
<p>In <a href="/category/linux.html">Linux</a>.</p>
<p>tags: <a href="/tag/hardware.html">Hardware</a> <a href="/tag/linux.html">Linux</a> </p>
</footer><!-- /.post-info -->      <p>One of the major issues on linux desktop these days has to do with 3G USB dongles/modems. In many countries like India, a USB dongle still remains a major way to access the Internet. The latest versions of <code class="highlighter-rouge">network-manager</code> has solved most of the issues relating to the basic recognition of these modems, but one major irritant still remains on Ubuntu 16.04 and a few other distros.<!--more--></p>
<p>It so happens that many a times, the connection entirely vanishes from the network-manager applet menu on the top right. For example, if you hibernate your laptop and then wake it, the menu is no longer there. However, if you manually take out the dongle and re-insert, the modem is recognized and the menu reappears. If you want to avoid that manual re-insertion and want to do a “soft reset” instead, here is what you can do:</p>
<ol>
<li>
<p>Send a reset signal to your usb modem:
    ::: {.highlighter-rouge}
    <code>{.highlight}
     sudo usb_modeswitch -v 12d1 -p 1496 -R</code>
    :::</p>
</li>
<li>
<p>Send a modeswitch signal to your usb modem:
    ::: {.highlighter-rouge}
    <code>{.highlight}
     sudo usb_modeswitch -v 12d1 -p 1496 -J</code>
    :::</p>
</li>
</ol>
<p>The parameters, <code class="highlighter-rouge">-v</code> and <code class="highlighter-rouge">-p</code> stand for vendor code and product code respectively and you can find them by running <code class="highlighter-rouge">lsusb</code> command. For example, the below entry is for vendor code <code class="highlighter-rouge">12d1</code> (Huawei) and the product code is <code class="highlighter-rouge">1496</code>.</p>
<p>::: {.highlighter-rouge}</p>
<div class="highlight"><pre><span></span>Bus 001 Device 004: ID 12d1:1496 Huawei Technologies Co., Ltd. Broadband stick
</pre></div>


<p>:::</p>
<p>Please remember that for modeswitch signal, the parameter -J is vendor specific and works for Huawei modems only, please run <code class="highlighter-rouge">man usb-modeswitch</code> to find out your vendor specific modeswitch control parameter. For instance, its -O for Sony and -L for Cisco control parameter.</p>
<p>Of course, once you try these commands and find that they are working, you can add them as a shortcut to your <code class="highlighter-rouge">~/.bashrc</code> file. Something like this:</p>
<p>::: {.highlighter-rouge}</p>
<div class="highlight"><pre><span></span>alias &quot;reset_huawei=sudo usb_modeswitch -v 12d1 -p 1496 -R&quot;
alias &quot;modeswitch_huawei=sudo usb_modeswitch -v 12d1 -p 1496 -J&quot;
</pre></div>


<p>:::</p>
<p>Now, all you need to do is run <code class="highlighter-rouge">reset_huawei &amp;&amp; modeswitch_huawei</code> and that’s it! No need to manually re-insert the dongle anymore.</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="mailto:prahladyeri@yahoo.com">Email</a></li>
                            <li><a href="https://github.com/prahladyeri/">Github</a></li>
                            <li><a href="https://stackoverflow.com/users/849365/prahlad-yeri/">StackOverflow</a></li>
                            <li><a href="https://www.quora.com/profile/Prahlad-Yeri-%E0%A4%AA%E0%A5%8D%E0%A4%B0%E0%A4%B9%E0%A5%8D%E0%A4%B2%E0%A4%BE%E0%A4%A6-%E0%A4%AF%E0%A5%87%E0%A4%B0%E0%A5%80">Quora</a></li>
                            <li><a href="https://mastodon.social/@prahladyeri">Mastodon.Social</a></li>
                            <li><a href="https://www.blogger.com/profile/12769325975373447545">Blogger</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://www.linkedin.com/in/prahlad-yeri-243a5316">Linkedin</a></li>
                            <li><a href="https://www.facebook.com/prahladyeri14">Facebook</a></li>
                            <li><a href="https://twitter.com/prahladyeri">Twitter</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Copyright (c) 2013-2019 <a href="/">Prahlad Yeri</a>.
				<br>
				This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'https://prahladyeri-blog.disqus.com';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>