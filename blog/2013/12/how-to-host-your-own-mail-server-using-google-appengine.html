<!DOCTYPE html>
<html lang="english">
<head>
        <meta charset="utf-8" />
        <title>How to host your own mail server using Google appengine</title>
        <link rel="stylesheet" href="https://prahladyeri.com/theme/css/main.css" />
        <link href="https://prahladyeri.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Prahlad Yeri - Freelance Programmer Atom Feed" />
		
	<meta name="twitter:card" content="summary" />
	 <meta name="twitter:site" content="@prahladyeri" />
	 <meta name="twitter:creator" value="@prahladyeri" />
		<meta name="twitter:url" content="https://prahladyeri.com/blog/2013/12/how-to-host-your-own-mail-server-using-google-appengine.html" />
	 	 <meta name="twitter:title" content="How to host your own mail server using Google appengine" />
		<meta name="twitter:description" content="Google has an outstanding habit of bringing the power of elites to the masses. Firstly, they took over the world of smartphones with android, and now the buzzword everywhere is Google Appengine. Once you get the basics of GAE and start looking beyond your first HelloWorld application, you will start â€¦" />		
			<meta name="twitter:image" content="https://prahladyeri.com/uploads/cover.jpg" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://prahladyeri.com/">Prahlad Yeri - Freelance Programmer </a></h1>
                <nav><ul>
				 <!--Start: hard coded-->
				<li ><a href="/">Home</a></li>
				<li  class="active"><a href="/blog/">Blog</a></li>
				<li ><a href="/projects/">Projects</a></li> 
				<li ><a href="/hire-me/">Hire Me</a></li> 
				<!--End: hard coded-->				
                    <!--li><a href="https://prahladyeri.com/">About</a></li-->
                    <!--li><a href="https://prahladyeri.com/projects/">Projects</a></li-->
                    <!--li><a href="https://prahladyeri.com/hire-me/">Hire Me</a></li-->
				<li><a href="https://github.com/prahladyeri/resume">Resume</a></li> <!--hard coded-->
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://prahladyeri.com/blog/2013/12/how-to-host-your-own-mail-server-using-google-appengine.html" rel="bookmark"
           title="Permalink to How to host your own mail server using Google appengine">How to host your own mail server using Google appengine</a></h1>
<a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="prahladyeri">Tweet</a><script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-12-30T21:23:00+05:30">
                Published: Mon 30 December 2013
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://prahladyeri.com/">Prahlad Yeri</a>
        </address>
<p>In <a href="https://prahladyeri.com/category/python.html">Python</a>.</p>
<p>tags: <a href="https://prahladyeri.com/tag/python.html">Python</a> <a href="https://prahladyeri.com/tag/google-app-engine.html">Google App Engine</a> </p>
</footer><!-- /.post-info -->      <p>Google has an outstanding habit of bringing the power of elites to the masses. Firstly, they took over the world of smartphones with android, and now the buzzword everywhere is Google Appengine.<!--more--></p>
<p>Once you get the basics of GAE and start looking beyond your first <a href="/blog/2013/12/how-to-create-a-pythonic-app-in-google-app-engine/" title="How to create a Python app in Google App Engine">HelloWorld</a> application, you will start appreciating the sheer power it provides compared to other paid hosting providers. GAE provides you the ability to send mails from your app without paying a single penny. Only if your app starts exceeding the usage quotas, you will have to pay in order to continue using the services.</p>
<p>An application of the above is creating and hosting your own email server through your app. Below is a single python script which acts as an http mail server that can route your email requests. It also doubles up as a test server so you can test the hosted service by appending the "/test" subdirectory to the url. You may pass http POST requests to your app including fields like username, to, cc, subject etc. once you build this script and host your app in the google cloud.</p>
<div class="highlight"><pre><span></span><span class="c1">#main.py</span>
<span class="kn">import</span> <span class="nn">webapp2</span>
<span class="kn">import</span> <span class="nn">urllib2</span>
<span class="kn">from</span> <span class="nn">google.appengine.api</span> <span class="kn">import</span> <span class="n">users</span><span class="p">,</span><span class="n">mail</span>

<span class="k">class</span> <span class="nc">TestPage</span><span class="p">(</span><span class="n">webapp2</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">body</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        &lt;form method=&quot;post&quot; action=&quot;http://your-app-id.appspot.com&quot;&gt;</span>
<span class="s2">        Full Name: &lt;input name=&quot;fullname&quot; /&gt;&lt;br /&gt;</span>
<span class="s2">        user: &lt;input name=&quot;username&quot; /&gt;&lt;br /&gt;</span>
<span class="s2">        to: &lt;input name=&quot;to&quot; /&gt;&lt;br /&gt;</span>
<span class="s2">        cc: &lt;input name=&quot;cc&quot; /&gt;&lt;br /&gt;</span>
<span class="s2">        bcc: &lt;input name=&quot;bcc&quot; /&gt;&lt;br /&gt;</span>
<span class="s2">        subject: &lt;input name=&quot;subject&quot; /&gt;&lt;br /&gt;</span>
<span class="s2">        body: &lt;textarea name=&quot;body&quot;&gt;&lt;/textarea&gt;&lt;br /&gt;</span>
<span class="s2">        &lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s2">        &lt;/form&gt;</span>
<span class="s2">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MainPage</span><span class="p">(</span><span class="n">webapp2</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#TODO: check if password is correct.</span>

        <span class="c1">#From will actually be a placeholder, since only your own appspotmail addresses would be allowed.</span>
        <span class="n">tfullname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fullname&#39;</span><span class="p">)</span>
        <span class="n">tusername</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
        <span class="n">tto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;to&#39;</span><span class="p">)</span>
        <span class="n">tcc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cc&#39;</span><span class="p">)</span>
        <span class="n">tbcc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;bcc&#39;</span><span class="p">)</span>
        <span class="n">tsubject</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;subject&#39;</span><span class="p">)</span>
        <span class="n">tbody</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span>
        <span class="n">tattachment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;attachment&#39;</span><span class="p">)</span>
        <span class="n">send_mail</span><span class="p">(</span><span class="n">fullname</span><span class="o">=</span><span class="n">tfullname</span><span class="p">,</span><span class="n">username</span><span class="o">=</span><span class="n">tusername</span><span class="p">,</span><span class="n">to</span><span class="o">=</span><span class="n">tto</span><span class="p">,</span><span class="n">subject</span><span class="o">=</span><span class="n">tsubject</span><span class="p">,</span><span class="n">body</span><span class="o">=</span><span class="n">tbody</span><span class="p">,</span><span class="n">cc</span><span class="o">=</span><span class="n">tcc</span><span class="p">,</span><span class="n">bcc</span><span class="o">=</span><span class="n">tbcc</span><span class="p">,</span><span class="n">attachment</span><span class="o">=</span><span class="n">tattachment</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;success&quot;</span><span class="p">)</span>
        <span class="c1">#self.response.write(tto)</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#self.response.headers[&#39;Content-Type&#39;] = &#39;text/plain&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;your-app-id http mail service version 1.0.&lt;br /&gt;</span>
<span class="s2">        post vars:</span>
<span class="s2">        [password]</span>
<span class="s2">        [fullname]</span>
<span class="s2">        [username]</span>
<span class="s2">        [to]</span>
<span class="s2">        [cc]</span>
<span class="s2">        [bcc]</span>
<span class="s2">        [subject]</span>
<span class="s2">        [body]</span>
<span class="s2">        [attachment]</span>

<span class="s2">        &lt;br /&gt;</span>
<span class="s2">        &lt;br /&gt;</span>

<span class="s2">        &lt;a type=&quot;button&quot; href=&quot;test&quot;&gt;Click here for a demo&lt;/a&gt;</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">send_mail</span><span class="p">(</span><span class="n">fullname</span><span class="p">,</span><span class="n">username</span><span class="p">,</span><span class="n">to</span><span class="p">,</span><span class="n">subject</span><span class="p">,</span><span class="n">body</span><span class="p">,</span><span class="n">cc</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">bcc</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">attachment</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">sender</span><span class="o">=</span><span class="n">fullname</span> <span class="o">+</span> <span class="s2">&quot; &lt;&quot;</span> <span class="o">+</span> <span class="n">username</span> <span class="o">+</span> <span class="s2">&quot;@your-app-id.appspotmail.com&gt;&quot;</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">mail</span><span class="o">.</span><span class="n">EmailMessage</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">sender</span><span class="p">)</span>
    <span class="n">message</span><span class="o">.</span><span class="n">to</span> <span class="o">=</span> <span class="n">to</span>
    <span class="k">if</span> <span class="n">cc</span><span class="o">!=</span><span class="bp">None</span> <span class="ow">and</span> <span class="n">cc</span><span class="o">!=</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">message</span><span class="o">.</span><span class="n">cc</span><span class="o">=</span><span class="n">cc</span>
    <span class="k">if</span> <span class="n">bcc</span><span class="o">!=</span><span class="bp">None</span> <span class="ow">and</span> <span class="n">bcc</span><span class="o">!=</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">message</span><span class="o">.</span><span class="n">bcc</span> <span class="o">=</span> <span class="n">bcc</span>
    <span class="n">message</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="n">subject</span>
    <span class="n">message</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">body</span>
    <span class="n">message</span><span class="o">.</span><span class="n">send</span><span class="p">()</span>

<span class="n">application</span> <span class="o">=</span> <span class="n">webapp2</span><span class="o">.</span><span class="n">WSGIApplication</span><span class="p">([</span>
                                       <span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">MainPage</span><span class="p">),</span>
                                       <span class="p">(</span><span class="s1">&#39;/test&#39;</span><span class="p">,</span> <span class="n">TestPage</span><span class="p">)</span>
                                       <span class="p">],</span> <span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>


<p>So now, you may bid farewell to third party mail services like mail-chimp and others - since you have your own mail server.</p>
    </div><!-- /.entry-content -->
	
	<!-- Start: Prahlad -->
	<!--start: adsense-->
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- mainsite_responsive -->
	<ins class="adsbygoogle"
		 style="display:block"
		 data-ad-client="ca-pub-0428291735937735"
		 data-ad-slot="6897031752"
		 data-ad-format="auto"></ins>
	<script>
	(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
	<!--end: adsense-->
	<!-- End: Prahlad -->

    <div class="comments">
      <h2>Comments !</h2>
      <div id="disqus_thread"></div>
		<script>
		/**
		*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
		*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
		
		/*var disqus_config = function () {
			this.page.url = 'https://prahladyeri.com/blog/2013/12/how-to-host-your-own-mail-server-using-google-appengine.html';  // Replace PAGE_URL with your page's canonical URL variable
			this.page.identifier = 'blog/2013/12/how-to-host-your-own-mail-server-using-google-appengine.html'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
		};
		(function() { // DON'T EDIT BELOW THIS LINE
		var d = document, s = d.createElement('script');
		s.src = 'https://prahladyeri-blog.disqus.com/embed.js';
		s.setAttribute('data-timestamp', +new Date());
		(d.head || d.body).appendChild(s);
		})();*/
		</script>	  
	  
      <script type="text/javascript">
        var disqus_shortname = 'prahladyeri-blog';
        var disqus_identifier = 'blog/2013/12/how-to-host-your-own-mail-server-using-google-appengine.html';
        var disqus_url = 'https://prahladyeri.com/blog/2013/12/how-to-host-your-own-mail-server-using-google-appengine.html';
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//prahladyeri-blog.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>Please enable JavaScript to view the comments.</noscript>
    </div>

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="mailto:prahladyeri@yahoo.com">Email</a></li>
                            <li><a href="https://github.com/prahladyeri/">Github</a></li>
                            <li><a href="https://stackoverflow.com/users/849365/prahlad-yeri/">StackOverflow</a></li>
                            <li><a href="https://www.quora.com/profile/Prahlad-Yeri">Quora</a></li>
                            <li><a href="https://mastodon.social/@prahladyeri">Mastodon.Social</a></li>
                            <li><a href="https://www.blogger.com/profile/12769325975373447545">Blogger</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://prahladyeri.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://www.linkedin.com/in/prahlad-yeri-243a5316">Linkedin</a></li>
                            <li><a href="https://www.facebook.com/prahladyeri14">Facebook</a></li>
                            <li><a href="https://twitter.com/prahladyeri">Twitter</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Copyright (c) 2013-2019 <a href="/">Prahlad Yeri</a>.
				<br>
				This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-6808883-5', 'auto');
    ga('send', 'pageview');
    </script>
<script type="text/javascript">
    var disqus_shortname = 'prahladyeri-blog';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>