<!DOCTYPE html>
<html lang="english">
<head>
        <meta charset="utf-8" />
        <title>How to create android dialogs in a reusable manner</title>
        <link rel="stylesheet" href="https://prahladyeri.com/theme/css/main.css" />
        <link href="https://prahladyeri.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Prahlad Yeri - Freelance Programmer Atom Feed" />
		
	<meta name="twitter:card" content="summary" />
	 <meta name="twitter:site" content="@prahladyeri" />
	 <meta name="twitter:creator" value="@prahladyeri" />
		<meta name="twitter:url" content="https://prahladyeri.com/blog/2013/12/how-to-create-android-dialogs-in-a-reusable-manner.html" />
	 	 <meta name="twitter:title" content="How to create android dialogs in a reusable manner" />
		<meta name="twitter:description" content="Creating dialogs is a very common need in your app to show a dialog box to the user in order to fetch a value, be it a mobile, desktop or even a web application. Furthermore, the values can range from anything like simple OK-Cancel dialog results to a list of â€¦" />		
			<meta name="twitter:image" content="https://prahladyeri.com/uploads/cover.jpg" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://prahladyeri.com/">Prahlad Yeri - Freelance Programmer </a></h1>
                <nav><ul>
				<li><a href="/">Home</a></li> <!--hard coded-->
                    <li><a href="https://prahladyeri.com/about/">About</a></li>
                    <li><a href="https://prahladyeri.com/projects/">Projects</a></li>
                    <li><a href="https://prahladyeri.com/hire-me/">Hire Me</a></li>
				<li><a href="https://github.com/prahladyeri/resume">Resume</a></li> <!--hard coded-->
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://prahladyeri.com/blog/2013/12/how-to-create-android-dialogs-in-a-reusable-manner.html" rel="bookmark"
           title="Permalink to How to create android dialogs in a reusable manner">How to create android dialogs in a reusable manner</a></h1>
<a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="prahladyeri">Tweet</a><script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-12-01T04:55:00+05:30">
                Published: Sun 01 December 2013
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://prahladyeri.com/author/prahlad-yeri.html">Prahlad Yeri</a>
        </address>
<p>In <a href="https://prahladyeri.com/category/java.html">Java</a>.</p>
<p>tags: <a href="https://prahladyeri.com/tag/android.html">Android</a> </p>
</footer><!-- /.post-info -->      <p>Creating dialogs is a very common need in your app to show a dialog box to the user in order to fetch a value, be it a mobile, desktop or even a web application. Furthermore, the values can range from anything like simple <em>OK-Cancel</em> dialog results to a list of "check-able" values or even a date-range.<!--more--></p>
<p><a href="http://www.prahladyeri.com/uploads/2013/11/droid-man.png"><img alt="droid-man" class="alignnone wp-image-209" height="70" src="/uploads/old/droid-man.png" width="60"></a></p>
<p>I experienced the need to create an android dialog for each one of those for showing reports in a recent android app project. Whilst the java api offers maximum flexibility in creating dialog interface elements, there is no ready-made method that can be called to get, say a result for a message-dialog like this:</p>
<div class="highlight"><pre><span></span>result = MessageBox.Show();
</pre></div>


<p>Other languages like C# and VB provide such methods to show modal dialog boxes that return values after waiting for a modal dialog. But unfortunately, there is no concept of "modal" in android. A thread cannot just sit idle waiting for input as the resources are too valuable for that. Instead, there is the concept of callbacks, so that instead of you waiting for the dialog to return, the method calls back a function reference you have passed it:</p>
<div class="highlight"><pre><span></span>AlertDialog.Builder builder=new AlertDialog.Builder(context);
builder.setTitle(&quot;Milk supply tracker&quot;);
builder.setMessage(message);
builder.setPositiveButton(&quot;Yes&quot;,listener);
builder.setNegativeButton(&quot;No&quot;,listener);
builder.create().show();
</pre></div>


<p>The listener here is the referece to a function that will be called when the Yes or No button will be clicked. This not only complicates your code, but makes it very difficult to reuse code for handling different situations like getting a selection from a range of values or getting a date/time range. To solve this problem, I created a separate java class called Dialog and added variations of ShowDialog() methods to handle each type of dialog:</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">Dialog</span>
<span class="p">{</span>
    <span class="kr">public</span> <span class="kr">static</span> <span class="k">void</span> <span class="nx">ShowMessageDialog</span><span class="p">(</span><span class="nx">Context</span> <span class="nx">context</span><span class="p">,</span> <span class="nb">String</span> <span class="nx">message</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">ShowDialog</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="nx">message</span><span class="p">,</span><span class="nx">MessageBoxType</span><span class="p">.</span><span class="nx">OKOnly</span><span class="p">,</span><span class="k">new</span> <span class="nb">String</span><span class="p">[]{},</span><span class="kc">false</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kr">public</span> <span class="kr">static</span> <span class="k">void</span> <span class="nx">ShowMessageDialog</span><span class="p">(</span><span class="nx">Context</span> <span class="nx">context</span><span class="p">,</span> <span class="nb">String</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">MessageBoxType</span> <span class="nx">type</span> <span class="p">,</span> <span class="nx">OnClickListener</span> <span class="nx">listener</span><span class="p">)</span>
     <span class="p">{</span>
         <span class="nx">ShowDialog</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="nx">message</span><span class="p">,</span><span class="nx">type</span><span class="p">,</span><span class="k">new</span> <span class="nb">String</span><span class="p">[]{},</span><span class="kc">false</span><span class="p">,</span> <span class="nx">listener</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
     <span class="p">}</span>

    <span class="kr">public</span> <span class="kr">static</span> <span class="k">void</span> <span class="nx">ShowListDialog</span><span class="p">(</span><span class="nx">Context</span> <span class="nx">context</span><span class="p">,</span> <span class="nb">String</span> <span class="nx">message</span><span class="p">,</span> <span class="nb">String</span><span class="p">[]</span> <span class="nx">listItems</span><span class="p">,</span> <span class="kr">boolean</span> <span class="nx">isMultiChoice</span><span class="p">,</span> <span class="nx">OnClickListener</span> <span class="nx">listener</span><span class="p">)</span>
     <span class="p">{</span>
     <span class="k">if</span> <span class="p">(</span><span class="nx">isMultiChoice</span><span class="p">)</span>
         <span class="nx">ShowDialog</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">MessageBoxType</span><span class="p">.</span><span class="nx">OkCancel</span> <span class="p">,</span> <span class="nx">listItems</span><span class="p">,</span> <span class="nx">isMultiChoice</span><span class="p">,</span> <span class="nx">listener</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
     <span class="k">else</span>
         <span class="nx">ShowDialog</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">MessageBoxType</span><span class="p">.</span><span class="nx">OKOnly</span> <span class="p">,</span> <span class="nx">listItems</span><span class="p">,</span> <span class="nx">isMultiChoice</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span><span class="nx">listener</span><span class="p">);</span>
     <span class="p">}</span>

    <span class="kr">public</span> <span class="kr">static</span> <span class="k">void</span> <span class="nx">ShowDateDialog</span><span class="p">(</span><span class="nx">Context</span> <span class="nx">context</span><span class="p">,</span><span class="nb">String</span> <span class="nx">message</span><span class="p">,</span><span class="nx">OnDateSetListener</span> <span class="nx">listener</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">Calendar</span> <span class="nx">c</span><span class="o">=</span><span class="nx">Calendar</span><span class="p">.</span><span class="nx">getInstance</span><span class="p">();</span>
        <span class="kr">int</span> <span class="nx">y</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">Calendar</span><span class="p">.</span><span class="nx">YEAR</span><span class="p">);</span>
        <span class="kr">int</span> <span class="nx">m</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">Calendar</span><span class="p">.</span><span class="nx">MONTH</span><span class="p">);</span>
        <span class="kr">int</span> <span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">Calendar</span><span class="p">.</span><span class="nx">DAY_OF_MONTH</span><span class="p">);</span>

        <span class="nx">DatePickerDialog</span> <span class="nx">dlg</span><span class="o">=</span><span class="k">new</span> <span class="nx">DatePickerDialog</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">listener</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
        <span class="nx">dlg</span><span class="p">.</span><span class="nx">setTitle</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
        <span class="nx">dlg</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>


<p>As you can see, the ShowMessageDialog() accepts different parameters depending on whether a listener is required or not. ShowListDialog(), on the other hand passes an array of strings to create a dialog displaying a list of values from which a user may select. The isMultiChoice parameter tells whether a checkbox is required or not against each value in the select list. All this is actually implemented in the ShowDialog() private method, whereas the ShowDateDialog() has its own implementation. Here is the source for ShowDialog():</p>
<div class="highlight"><pre><span></span>private static void ShowDialog(Context context, String message, MessageBoxType type , String[] listItems, boolean isMultiChoice, OnClickListener listener,OnClickListener selectedItemListener)
{
    AlertDialog.Builder builder=new AlertDialog.Builder(context);

    if (listItems.length&gt;0 &amp;&amp; isMultiChoice==false)
    {
        CheckedItems=new ArrayList();//won&#39;t be used in this case.
        builder.setTitle(message);

        builder.setItems(listItems, selectedItemListener);
    }
    else if (listItems.length&gt;0 &amp;&amp; isMultiChoice==true)
    {
        CheckedItems=new ArrayList();
        builder.setTitle(message);

        builder.setMultiChoiceItems(listItems, null, new OnMultiChoiceClickListener() 
        {
            @Override
            public void onClick(DialogInterface dialog, int which, boolean checked) 
            {
                if (checked)
                    CheckedItems.add(which);
                else
                {
                    if (CheckedItems.contains(which))
                        CheckedItems.remove(which);
                }
            }
        });
    }
    else
    {
        builder.setTitle(&quot;Milk supply tracker&quot;);
        builder.setMessage(message);
    }

    if (listItems.length==0 || isMultiChoice)
    {
        switch(type)
        {
        case OKOnly:
            builder.setPositiveButton(&quot;OK&quot;,listener);
            break;
        case OkCancel:
            builder.setPositiveButton(&quot;OK&quot;,listener);
            builder.setNegativeButton(&quot;Cancel&quot;,listener);
            break;
        case YesNo:
            builder.setPositiveButton(&quot;Yes&quot;,listener);
            builder.setNegativeButton(&quot;No&quot;,listener);
            break;
        }           
    }

    builder.create().show();
}
</pre></div>


<p>So hopefully, this class should suffice all your needs related to showing a dialog on your android app. Here is a working example of how the ShowListDialog() is actually called with checkboxes on:</p>
<div class="highlight"><pre><span></span><span class="nt">selItems</span><span class="o">=</span><span class="nt">new</span> <span class="nt">String</span><span class="cp">[]</span><span class="p">{</span><span class="err">&quot;apples&quot;,&quot;oranges&quot;,&quot;grapes&quot;</span><span class="p">}</span><span class="o">;</span>
<span class="nt">Device</span><span class="p">.</span><span class="nc">ShowListDialog</span><span class="o">(</span><span class="nt">this</span><span class="o">,</span><span class="s2">&quot;Select a fruit&quot;</span> <span class="o">,</span><span class="nt">this</span><span class="p">.</span><span class="nc">selItems</span><span class="o">,</span> <span class="nt">true</span><span class="o">,</span> <span class="nt">new</span> <span class="nt">DialogInterface</span><span class="p">.</span><span class="nc">OnClickListener</span><span class="o">()</span> <span class="p">{</span>

        <span class="err">@Override</span>
        <span class="err">public</span> <span class="err">void</span> <span class="err">onClick(DialogInterface</span> <span class="err">dialog,</span> <span class="err">int</span> <span class="err">which)</span> 
        <span class="err">{</span>
            <span class="err">if</span> <span class="err">(which==DialogInterface.BUTTON_POSITIVE)</span>
            <span class="err">{</span>
                <span class="err">for(int</span> <span class="n">i</span><span class="p">:</span><span class="n">Device</span><span class="o">.</span><span class="n">CheckedItems</span><span class="p">)</span>
                <span class="n">Dialog</span><span class="o">.</span><span class="nf">ShowMessageDialog</span><span class="p">(</span><span class="n">ReportsActivity</span><span class="err">.</span><span class="n">this</span><span class="p">,</span> <span class="s2">&quot;selected:&quot;</span> <span class="o">+</span> <span class="n">selItems</span><span class="cp">[</span><span class="nx">i</span><span class="cp">]</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="err">}</span>
    <span class="err">}</span><span class="o">);</span>
<span class="err">}</span>
</pre></div>
    </div><!-- /.entry-content -->
	
	<!-- Start: Prahlad -->
	<!--start: adsense-->
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- mainsite_responsive -->
	<ins class="adsbygoogle"
		 style="display:block"
		 data-ad-client="ca-pub-0428291735937735"
		 data-ad-slot="6897031752"
		 data-ad-format="auto"></ins>
	<script>
	(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
	<!--end: adsense-->
	<!-- End: Prahlad -->

    <div class="comments">
      <h2>Comments !</h2>
      <div id="disqus_thread"></div>
		<script>
		/**
		*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
		*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
		
		/*var disqus_config = function () {
			this.page.url = 'https://prahladyeri.com/blog/2013/12/how-to-create-android-dialogs-in-a-reusable-manner.html';  // Replace PAGE_URL with your page's canonical URL variable
			this.page.identifier = 'blog/2013/12/how-to-create-android-dialogs-in-a-reusable-manner.html'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
		};
		(function() { // DON'T EDIT BELOW THIS LINE
		var d = document, s = d.createElement('script');
		s.src = 'https://prahladyeri-blog.disqus.com/embed.js';
		s.setAttribute('data-timestamp', +new Date());
		(d.head || d.body).appendChild(s);
		})();*/
		</script>	  
	  
      <script type="text/javascript">
        var disqus_shortname = 'prahladyeri-blog';
        var disqus_identifier = 'blog/2013/12/how-to-create-android-dialogs-in-a-reusable-manner.html';
        var disqus_url = 'https://prahladyeri.com/blog/2013/12/how-to-create-android-dialogs-in-a-reusable-manner.html';
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//prahladyeri-blog.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>Please enable JavaScript to view the comments.</noscript>
    </div>

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="mailto:prahladyeri@yahoo.com">Email</a></li>
                            <li><a href="https://github.com/prahladyeri/">Github</a></li>
                            <li><a href="https://stackoverflow.com/users/849365/prahlad-yeri/">StackOverflow</a></li>
                            <li><a href="https://www.quora.com/profile/Prahlad-Yeri">Quora</a></li>
                            <li><a href="https://mastodon.social/@prahladyeri">Mastodon.Social</a></li>
                            <li><a href="https://www.blogger.com/profile/12769325975373447545">Blogger</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://prahladyeri.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://www.linkedin.com/in/prahlad-yeri-243a5316">Linkedin</a></li>
                            <li><a href="https://www.facebook.com/prahladyeri14">Facebook</a></li>
                            <li><a href="https://twitter.com/prahladyeri">Twitter</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Copyright (c) 2013-2019 <a href="/">Prahlad Yeri</a>.
				<br>
				This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-6808883-5', 'auto');
    ga('send', 'pageview');
    </script>
<script type="text/javascript">
    var disqus_shortname = 'prahladyeri-blog';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>